<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DHART: DHARTAPI.ViewAnalysis.ViewAnalysis Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-css.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DHART
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DHARTAPI.ViewAnalysis.ViewAnalysis Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for analyzing the view of an observer in an environment at human scale.  
 <a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad653d720d58cafab4a9adc1c72be186e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_common_native_arrays_1_1_managed_float_array.html">ManagedFloatArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#ad653d720d58cafab4a9adc1c72be186e">ViewAnalysisAggregate</a> (<a class="el" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> bvh, IEnumerable&lt; <a class="el" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> &gt; nodes, int ray_count, float upward_fov=50.0f, float downward_fov=70.0f, float height=1.7f, <a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html#a0c377126f38d722e30efe3609ee8391e">ViewAggregateType</a> type=ViewAggregateType.AVERAGE)</td></tr>
<tr class="memdesc:ad653d720d58cafab4a9adc1c72be186e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conduct view analysis and aggregate the results for each node.  <a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#ad653d720d58cafab4a9adc1c72be186e">More...</a><br /></td></tr>
<tr class="separator:ad653d720d58cafab4a9adc1c72be186e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97eba82450f4eb1475614f6ca6738f91"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_result_array.html">ResultArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#a97eba82450f4eb1475614f6ca6738f91">ViewAnalysisStandard</a> (<a class="el" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> bvh, IEnumerable&lt; <a class="el" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> &gt; nodes, int ray_count, float upward_fov=50.0f, float downward_fov=70.0f, float height=1.7f)</td></tr>
<tr class="memdesc:a97eba82450f4eb1475614f6ca6738f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conduct View Analysis and access the results of every ray casted for every node.  <a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#a97eba82450f4eb1475614f6ca6738f91">More...</a><br /></td></tr>
<tr class="separator:a97eba82450f4eb1475614f6ca6738f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f9b2bba104cb1e3b085890f5d261dd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_direction_array.html">DirectionArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#aa7f9b2bba104cb1e3b085890f5d261dd">SphericallyDistributeRays</a> (int num_rays, float upward_fov=50f, float downward_fov=70f)</td></tr>
<tr class="memdesc:aa7f9b2bba104cb1e3b085890f5d261dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Distribute a set of points equally on a unit sphere.  <a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#aa7f9b2bba104cb1e3b085890f5d261dd">More...</a><br /></td></tr>
<tr class="separator:aa7f9b2bba104cb1e3b085890f5d261dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Functions for analyzing the view of an observer in an environment at human scale. </p>
<dl class="section note"><dt>Note</dt><dd>All of these functions internally use a raytracer, so a <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html" title="A Bounding Volume Hierarchy for the EmbreeRaytracer.">DHARTAPI.RayTracing.EmbreeBVH</a> is required. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa7f9b2bba104cb1e3b085890f5d261dd" name="aa7f9b2bba104cb1e3b085890f5d261dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f9b2bba104cb1e3b085890f5d261dd">&#9670;&#160;</a></span>SphericallyDistributeRays()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_direction_array.html">DirectionArray</a> DHARTAPI.ViewAnalysis.ViewAnalysis.SphericallyDistributeRays </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rays</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>upward_fov</em> = <code>50f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>downward_fov</em> = <code>70f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Distribute a set of points equally on a unit sphere. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_rays</td><td>The number of points to distribute. </td></tr>
    <tr><td class="paramname">upward_fov</td><td>Maximum angle above the sphere to generate points in degrees, </td></tr>
    <tr><td class="paramname">downward_fov</td><td>Maximum angle in degrees downwards to generate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An array of equally distributed points on a unit sphere.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The number of rays casted may not exactly match <code>ray_count</code> depending on the provided field of view restrictions.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is the same function used internally by view analysis to equally distribute ray directions.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"> </div>
<div class="line">            <span class="comment">// Equally distribute 10 rays</span></div>
<div class="line">            var results = <a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>.<a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#aa7f9b2bba104cb1e3b085890f5d261dd">SphericallyDistributeRays</a>(10);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Print results</span></div>
<div class="line">            Debug.WriteLine(results);</div>
<div class="line"> </div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html">DHARTAPI.ViewAnalysis.ViewAnalysis</a></div><div class="ttdoc">Functions for analyzing the view of an observer in an environment at human scale.</div><div class="ttdef"><b>Definition:</b> ViewAnalysis.cs:52</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis_html_aa7f9b2bba104cb1e3b085890f5d261dd"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#aa7f9b2bba104cb1e3b085890f5d261dd">DHARTAPI.ViewAnalysis.ViewAnalysis.SphericallyDistributeRays</a></div><div class="ttdeci">static DirectionArray SphericallyDistributeRays(int num_rays, float upward_fov=50f, float downward_fov=70f)</div><div class="ttdoc">Distribute a set of points equally on a unit sphere.</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_view_analysis_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html">DHARTAPI.ViewAnalysis</a></div><div class="ttdoc">Analyze the view from from points in the environment.</div><div class="ttdef"><b>Definition:</b> ViewAnalysis.cs:24</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a></div><div class="ttdoc">Automated analysis of the built environent</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:9</div></div>
</div><!-- fragment --> <code>[0, -1, 0, -0.2650034, -0.8181818, . . . -0.7649929, 0.4396428, 0.8181818, 0.3705303]</code> </dd></dl>

</div>
</div>
<a id="ad653d720d58cafab4a9adc1c72be186e" name="ad653d720d58cafab4a9adc1c72be186e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad653d720d58cafab4a9adc1c72be186e">&#9670;&#160;</a></span>ViewAnalysisAggregate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_common_native_arrays_1_1_managed_float_array.html">ManagedFloatArray</a> DHARTAPI.ViewAnalysis.ViewAnalysis.ViewAnalysisAggregate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>&#160;</td>
          <td class="paramname"><em>bvh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> &gt;&#160;</td>
          <td class="paramname"><em>nodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ray_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>upward_fov</em> = <code>50.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>downward_fov</em> = <code>70.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>height</em> = <code>1.7f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html#a0c377126f38d722e30efe3609ee8391e">ViewAggregateType</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code>ViewAggregateType.AVERAGE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Conduct view analysis and aggregate the results for each node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bvh</td><td>the <a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html" title="Manipulate and load geometry from disk.">Geometry</a> to intersect with. </td></tr>
    <tr><td class="paramname">nodes</td><td>Observer locations to perform view analysis from. </td></tr>
    <tr><td class="paramname">ray_count</td><td>Number of rays to cast. Higher values provide more accurate analysis, but increase the runtime of this function </td></tr>
    <tr><td class="paramname">upward_fov</td><td>Maximum angle in degrees above the viewer's eye level that is considered. </td></tr>
    <tr><td class="paramname">downward_fov</td><td>Maximum angle in degrees below the viewer's eye level that is considered. </td></tr>
    <tr><td class="paramname">height</td><td>Height of the observer. Nodes are offset this distance from the ground before the analysis is performed. </td></tr>
    <tr><td class="paramname">type</td><td>How the distances for all hits should be aggregated. See <a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html#a0c377126f38d722e30efe3609ee8391e">ViewAggregateType</a> for a list of all aggregation methods.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ordered array of floats corresponding to the aggregated score for each node in nodes.</dd></dl>
<p>The rays for each node will be casted in parallel using all available cores on the host's machine.</p>
<dl class="section remark"><dt>Remarks</dt><dd>This function is much lighter in memory than <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#a97eba82450f4eb1475614f6ca6738f91">ViewAnalysisStandard</a> since all operations are done in place on single floats. Use this as a faster alternative if the scores of nodes are all that's needed.</dd></dl>
<dl class="section user"><dt>Examples</dt><dd></dd></dl>
<div class="fragment"><div class="line">            <span class="comment">// Load the plane .obj from example models, and rotate it from y-up to z-up</span></div>
<div class="line">            <span class="keywordtype">string</span> mesh_path = <span class="stringliteral">&quot;ExampleModels/plane.obj&quot;</span>;</div>
<div class="line">            MeshInfo OBJ = OBJLoader.LoadOBJ(mesh_path, CommonRotations.Zup_To_Yup);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Create a BVH from the plane</span></div>
<div class="line">            <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> bvh = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>(OBJ);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> Point = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0, 0, 0);</div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>[] nodes = { Point };</div>
<div class="line">            <span class="keywordtype">int</span> num_rays = 1000;</div>
<div class="line"> </div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">DHARTAPI.RayTracing.EmbreeBVH</a></div><div class="ttdoc">A Bounding Volume Hierarchy for the EmbreeRaytracer.</div><div class="ttdef"><b>Definition:</b> EmbreeBVH.cs:31</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">DHARTAPI.Vector3D</a></div><div class="ttdoc">A three dimensional vector with built in utility functions.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:40</div></div>
</div><!-- fragment --> <div class="fragment"><div class="line"> </div>
<div class="line">            <span class="comment">// Define the nodes to evaluate</span></div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>[] nodes = {</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0,0,1),</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0,0,2),</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0,0,3)</div>
<div class="line">            };</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Set maximum number of rays, then conduct analysis</span></div>
<div class="line">            <span class="keywordtype">int</span> num_rays = 1000;</div>
<div class="line">            ManagedFloatArray results = <a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>.<a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#ad653d720d58cafab4a9adc1c72be186e">ViewAnalysisAggregate</a>(</div>
<div class="line">                bvh,</div>
<div class="line">                nodes,</div>
<div class="line">                num_rays,</div>
<div class="line">                type:<a class="code hl_enumeration" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html#a0c377126f38d722e30efe3609ee8391e">ViewAggregateType</a>.COUNT</div>
<div class="line">            );</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Print results. The number of rays should get lower with each element, since each node</span></div>
<div class="line">            <span class="comment">// is further away from the plane than the last</span></div>
<div class="line">            Debug.WriteLine(results);</div>
<div class="line"> </div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis_html_ad653d720d58cafab4a9adc1c72be186e"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#ad653d720d58cafab4a9adc1c72be186e">DHARTAPI.ViewAnalysis.ViewAnalysis.ViewAnalysisAggregate</a></div><div class="ttdeci">static ManagedFloatArray ViewAnalysisAggregate(EmbreeBVH bvh, IEnumerable&lt; Vector3D &gt; nodes, int ray_count, float upward_fov=50.0f, float downward_fov=70.0f, float height=1.7f, ViewAggregateType type=ViewAggregateType.AVERAGE)</div><div class="ttdoc">Conduct view analysis and aggregate the results for each node.</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_view_analysis_html_a0c377126f38d722e30efe3609ee8391e"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html#a0c377126f38d722e30efe3609ee8391e">DHARTAPI.ViewAnalysis.ViewAggregateType</a></div><div class="ttdeci">ViewAggregateType</div><div class="ttdoc">The type of aggregation method to use for ViewAnalysis.ViewAnalysisAggregate.</div><div class="ttdef"><b>Definition:</b> ViewAnalysis.cs:29</div></div>
</div><!-- fragment --><p> <code>[480, 451, 428]</code> </p>

<p class="reference">Referenced by <a class="el" href="class_string_to_edge_cost.html#a9d8ddc097dd1084613af18ac06804b49">StringToEdgeCost.Main()</a>.</p>

</div>
</div>
<a id="a97eba82450f4eb1475614f6ca6738f91" name="a97eba82450f4eb1475614f6ca6738f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97eba82450f4eb1475614f6ca6738f91">&#9670;&#160;</a></span>ViewAnalysisStandard()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_result_array.html">ResultArray</a> DHARTAPI.ViewAnalysis.ViewAnalysis.ViewAnalysisStandard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>&#160;</td>
          <td class="paramname"><em>bvh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> &gt;&#160;</td>
          <td class="paramname"><em>nodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ray_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>upward_fov</em> = <code>50.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>downward_fov</em> = <code>70.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>height</em> = <code>1.7f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Conduct View Analysis and access the results of every ray casted for every node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bvh</td><td><a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html" title="Manipulate and load geometry from disk.">Geometry</a> to intersect with. </td></tr>
    <tr><td class="paramname">nodes</td><td>Observer locations to perform view analysis from. </td></tr>
    <tr><td class="paramname">ray_count</td><td>Number of rays to cast.Higher values provide more accurate analysis, but increase the runtime and memory consumption of this function. </td></tr>
    <tr><td class="paramname">upward_fov</td><td>Maximum angle in degrees above the viewer's eye level that is considered. </td></tr>
    <tr><td class="paramname">downward_fov</td><td>Maximum angle in degrees below the viewer's eye level that is considered. </td></tr>
    <tr><td class="paramname">height</td><td>Height of the observer. Nodes are offset this distance from the ground before the analysis is performed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>nodes.Count()</code> by <code>num_rays</code> 2 dimensional array of results for each node and each ray casted. For example, every ray for node one is located at row 1, and the results for every ray casted from node 2 are located at row 2.</dd></dl>
<p>The rays for each node will be casted in parallel using all available cores on the host's machine.</p>
<dl class="section warning"><dt>Warning</dt><dd>The number of rays casted may not exactly match ray_count depending on the provided field of view restrictions.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The hitpoints for each ray in the returned array can be determined using the directions <a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#aa7f9b2bba104cb1e3b085890f5d261dd" title="Distribute a set of points equally on a unit sphere.">SphericallyDistributeRays()</a> with the same fov and ray_count parameters. Failures to intersect geometry will return -1.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">            <span class="comment">// Load the plane .obj from example models, and rotate it from y-up to z-up</span></div>
<div class="line">            <span class="keywordtype">string</span> mesh_path = <span class="stringliteral">&quot;ExampleModels/plane.obj&quot;</span>;</div>
<div class="line">            MeshInfo OBJ = OBJLoader.LoadOBJ(mesh_path, CommonRotations.Zup_To_Yup);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Create a BVH from the plane</span></div>
<div class="line">            <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> bvh = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>(OBJ);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> Point = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0, 0, 0);</div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>[] nodes = { Point };</div>
<div class="line">            <span class="keywordtype">int</span> num_rays = 1000;</div>
<div class="line"> </div>
</div><!-- fragment --> <div class="fragment"><div class="line">            <span class="comment">// Define the nodes to evaluate</span></div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>[] nodes = {</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0,0,1),</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(1,1,1),</div>
<div class="line">                <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0,0,3)</div>
<div class="line">            };</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Set maximum number of rays, then conduct analysis</span></div>
<div class="line">            <span class="keywordtype">int</span> num_rays = 10;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Conduct view analysis and get all the results</span></div>
<div class="line">            var results = <a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>.<a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html">ViewAnalysis</a>.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#a97eba82450f4eb1475614f6ca6738f91">ViewAnalysisStandard</a>(bvh, nodes, num_rays);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Iterate through every node and print the results</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> node_index = 0; node_index &lt; nodes.Length; node_index++)</div>
<div class="line">            {</div>
<div class="line">                var node = nodes[node_index];</div>
<div class="line">                <span class="keywordtype">string</span> print = node.<a class="code hl_function" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a4e78aca40dbd70040b58f734372d5745">ToString</a>() + <span class="stringliteral">&quot;: (&quot;</span>;</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ray_index = 0; ray_index &lt; num_rays; ray_index++)</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Get the result for the current node at the current ray</span></div>
<div class="line">                    var result = results[node_index][ray_index];</div>
<div class="line">                    print += result.ToString();</div>
<div class="line"> </div>
<div class="line">                    <span class="comment">// Add a comma if it isn&#39;t the last element</span></div>
<div class="line">                    <span class="keywordflow">if</span> (ray_index != num_rays - 1)</div>
<div class="line">                        print += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                        print += <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// Print the line</span></div>
<div class="line">                Debug.WriteLine(print);</div>
<div class="line">                    </div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis_html_a97eba82450f4eb1475614f6ca6738f91"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html#a97eba82450f4eb1475614f6ca6738f91">DHARTAPI.ViewAnalysis.ViewAnalysis.ViewAnalysisStandard</a></div><div class="ttdeci">static ResultArray ViewAnalysisStandard(EmbreeBVH bvh, IEnumerable&lt; Vector3D &gt; nodes, int ray_count, float upward_fov=50.0f, float downward_fov=70.0f, float height=1.7f)</div><div class="ttdoc">Conduct View Analysis and access the results of every ray casted for every node.</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html_a4e78aca40dbd70040b58f734372d5745"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a4e78aca40dbd70040b58f734372d5745">DHARTAPI.Vector3D.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdoc">Construct a string representation of this vector's x, y, and z coordinates.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:111</div></div>
</div><!-- fragment --></dd></dl>
<div class="fragment"><div class="line">(0, 0, 1): ([-1, -1], [5.292, 0], [-1, -1], [-1, -1], [3.098, 0], [5.407, 0], [13.07, 0], [-1, -1], [3.529, 0], [-1, -1])</div>
<div class="line">(1, 1, 1): ([-1, -1], [5.292, 0], [-1, -1], [-1, -1], [3.098, 0], [5.407, 0], [13.07, 0], [-1, -1], [3.529, 0], [-1, -1])</div>
<div class="line">(0, 0, 3): ([-1, -1], [9.211, 0], [-1, -1], [-1, -1], [5.394, 0], [9.413, 0], [-1, -1], [-1, -1], [6.144, 0], [-1, -1])</div>
</div><!-- fragment --> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Csharp/packages/viewanalysis/src/ViewAnalysis.cs</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a></li><li class="navelem"><a class="el" href="namespace_d_h_a_r_t_a_p_i_1_1_view_analysis.html">ViewAnalysis</a></li><li class="navelem"><a class="el" href="class_d_h_a_r_t_a_p_i_1_1_view_analysis_1_1_view_analysis.html">ViewAnalysis</a></li>
    <li class="footer">Generated on Mon May 22 2023 14:09:11 for DHART by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
