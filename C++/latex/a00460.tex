\hypertarget{a00460}{}\doxysection{Visibility\+Graph}
\label{a00460}\index{VisibilityGraph@{VisibilityGraph}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} \mbox{\hyperlink{a00460_ga0255e6c4811298e61110adc64c0f8acd}{Create\+Visibility\+Graph\+All\+To\+All}} (\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$ert, const float $\ast$nodes, int num\+\_\+nodes, \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$out\+\_\+graph, float height)
\begin{DoxyCompactList}\small\item\em Create a new directed visibility graph between all nodes in parameter nodes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} \mbox{\hyperlink{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}{Create\+Visibility\+Graph\+All\+To\+All\+Undirected}} (\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$ert, const float $\ast$nodes, int num\+\_\+nodes, \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$out\+\_\+graph, float height, const int cores)
\begin{DoxyCompactList}\small\item\em Create a new undirected visibility graph between all nodes in nodes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} \mbox{\hyperlink{a00460_gaf2e404cb696aee3473cac0d1507576d8}{Create\+Visibility\+Graph\+Group\+To\+Group}} (\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$ert, const float $\ast$group\+\_\+a, const int size\+\_\+a, const float $\ast$group\+\_\+b, const int size\+\_\+b, \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$out\+\_\+graph, float height)
\begin{DoxyCompactList}\small\item\em Create a new visibility graph from the nodes in group\+\_\+a, into the nodes of group\+\_\+b. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Determine which points are visible from other points in space. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{a00460_ga0255e6c4811298e61110adc64c0f8acd}\label{a00460_ga0255e6c4811298e61110adc64c0f8acd}} 
\index{VisibilityGraph@{VisibilityGraph}!CreateVisibilityGraphAllToAll@{CreateVisibilityGraphAllToAll}}
\index{CreateVisibilityGraphAllToAll@{CreateVisibilityGraphAllToAll}!VisibilityGraph@{VisibilityGraph}}
\doxysubsubsection{\texorpdfstring{CreateVisibilityGraphAllToAll()}{CreateVisibilityGraphAllToAll()}}
{\footnotesize\ttfamily \mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} Create\+Visibility\+Graph\+All\+To\+All (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$}]{ert,  }\item[{const float $\ast$}]{nodes,  }\item[{int}]{num\+\_\+nodes,  }\item[{\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$}]{out\+\_\+graph,  }\item[{float}]{height }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\mbox{\hyperlink{a00449}{Cinterface/visibility\+\_\+graph\+\_\+\+C.\+h}}$>$}



Create a new directed visibility graph between all nodes in parameter nodes. 


\begin{DoxyParams}{Parameters}
{\em ert} & The raytracer to cast rays from\\
\hline
{\em nodes} & Coordinates of nodes to use in generating the visibility graph. Every three floats (every three members in nodes) should represent a single node (point) \{x, y, z\}\\
\hline
{\em num\+\_\+nodes} & Amount of nodes (points) that will be used to generate the visibility graph. This should be equal to (size of nodes / 3), since every three floats represents a single point.\\
\hline
{\em out\+\_\+graph} & Address of (\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$); address of a pointer to a \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}}. (out\+\_\+graph) will point to memory allocated by \mbox{\hyperlink{a00460_ga0255e6c4811298e61110adc64c0f8acd}{Create\+Visibility\+Graph\+All\+To\+All}}.\\
\hline
{\em height} & How far to offset nodes from the ground.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
HF\+\_\+\+STATUS\+::\+OK on completion
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}} (How to create a mesh), (How to destroy a mesh) 

\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}} (How to create a BVH), \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} (How to destroy a BVH)
\end{DoxySeeAlso}
Begin by {\bfseries{loading an .obj file}} (\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}}).~\newline
 Then, {\bfseries{create a BVH}} (\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}}) using the {\bfseries{mesh}}.~\newline


Set up the parameters for the visibility graph. 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// The model is a flat plane, so only nodes 0, 2 should connect.}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Every three floats should represent a single (x, y, z) point.}}
\DoxyCodeLine{        \textcolor{keyword}{const} std::array<float, 9> points \{ 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, -\/10.0f, 0.0f, 2.0f, 0.0f \};}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// This should be the array element count within points.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} points\_size = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(points.size());}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Represents how far to offset nodes from the ground.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{float} height = 1.7f;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Total amount of nodes to use in the visibility graph.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} points\_count = points\_size / 3;}

\end{DoxyCodeInclude}


Now we are ready to call \mbox{\hyperlink{a00460_ga0255e6c4811298e61110adc64c0f8acd}{Create\+Visibility\+Graph\+All\+To\+All}} . 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Declare a pointer to Graph.}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Notice that we pass the address of VG to CreateVisibilityAllToAll.}}
\DoxyCodeLine{        \textcolor{comment}{// CreateVisibilityAllToAll will assign the deferenced address to a pointer that points}}
\DoxyCodeLine{        \textcolor{comment}{// to memory on the free store. We will call DestroyGraph to release the memory resources later on.}}
\DoxyCodeLine{        \mbox{\hyperlink{a01551}{HF::SpatialStructures::Graph}}* VG = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00460_ga0255e6c4811298e61110adc64c0f8acd}{CreateVisibilityGraphAllToAll}}(bvh, points.data(), points\_count, \&VG, height);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at CreateVisibilityGraphAllToAll, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Very important\+: {\bfseries{after generating/adding edges to a graph -- it must be compressed.}} 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Always compress the graph after generating a graph/adding new edges}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_gab7ecc1be5c746ed3f99ab7494316c65d}{Compress}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at Compress, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// VG, the visibility graph, is now ready for use.}}
\DoxyCodeLine{        \textcolor{comment}{//}}

\end{DoxyCodeInclude}


You are now ready to use the visibility graph. Start by retrieving the {\bfseries{CSR representation}} of the graph\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Retrieve CSR representation of graph}}
\DoxyCodeLine{        \mbox{\hyperlink{a01539}{HF::SpatialStructures::CSRPtrs}} csr;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// The parameter default name refers to an alternate edge cost type.}}
\DoxyCodeLine{        \textcolor{comment}{// An empty string means we are using the default cost type}}
\DoxyCodeLine{        \textcolor{comment}{// (the costs that the graph was created with),}}
\DoxyCodeLine{        \textcolor{comment}{// but alternate edge costs could also be 'CrossSlope' or 'EnergyExpenditure', etc.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{char}* default\_name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga58e27a4c3b5a2d9692536877c2e13691}{GetCSRPointers}}(VG,}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}}, \&csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}}, \&csr.\mbox{\hyperlink{a01539_a5aed9a3184fd7d7aded80c97c33e2dc5}{cols}},}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}}, \&csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}}, \&csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}},}
\DoxyCodeLine{            default\_name);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at GetCSRPointers, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Set up the {\bfseries{pointers}} required to iterate over the CSR. Then {\bfseries{output the CSR to the console}}\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Setting up a CSR 'iterator'}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* curr = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}};                 \textcolor{comment}{// address of current position within edge data}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* data\_end = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}};    \textcolor{comment}{// address of one-\/past the last element within edge data}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordtype}{int}* inner = csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}};            \textcolor{comment}{// address of current position within child node id buffer (column value)}}
\DoxyCodeLine{        \textcolor{keywordtype}{int} row = 0;                            \textcolor{comment}{// value denoting the current parent node id (row number)}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{while} (curr < data\_end) \{}
\DoxyCodeLine{            \textcolor{comment}{// While edge data remains...}}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Note the current position within the edge data buffer.}}
\DoxyCodeLine{            \textcolor{comment}{// This is the address that denotes the beginning of a row.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_begin = curr;}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// If we are at the last row index,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is data\_end -\/-\/ else,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is the address of the next row's (row + 1) initial value.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_end =}
\DoxyCodeLine{                (row == csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}} -\/ 1)}
\DoxyCodeLine{                ? data\_end : csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}}[row + 1];}
\DoxyCodeLine{}
\DoxyCodeLine{            while (curr < row\_end) \{}
\DoxyCodeLine{                \textcolor{comment}{// While curr is not at the end of the current row...}}
\DoxyCodeLine{}
\DoxyCodeLine{                \textcolor{comment}{// row is the parent node id}}
\DoxyCodeLine{                \textcolor{comment}{// *inner is the child node id}}
\DoxyCodeLine{                \textcolor{comment}{// *curr is the edge value between parent node id and child node id}}
\DoxyCodeLine{                std::cout << \textcolor{stringliteral}{"{}("{}} << row << \textcolor{stringliteral}{"{}, "{}} << *inner << \textcolor{stringliteral}{"{})"{}}}
\DoxyCodeLine{                    << \textcolor{stringliteral}{"{}\(\backslash\)t\(\backslash\)t"{}} << *curr << std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{                ++inner;    \textcolor{comment}{// advance the address of inner (child node id buffer)}}
\DoxyCodeLine{                ++curr;     \textcolor{comment}{// advance the address of curr (edge data buffer)}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{}
\DoxyCodeLine{            ++row;  \textcolor{comment}{// advance the row value (parent node id)}}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


After use, the visibility graph resources must be {\bfseries{relinquished}}\+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// destroy VG (visibility graph)}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga645abacd11e1fa535f953344aaa77727}{DestroyGraph}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at DestroyGraph, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


From here, please review the example at \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} for instructions~\newline
 on how to free the remainder of the resources used by the visibility graph -- ~\newline
 which are the (vector\texorpdfstring{$<$}{<}\mbox{\hyperlink{a01351}{HF\+::\+Geometry\+::\+Mesh\+Info}}\texorpdfstring{$>$}{>} $\ast$) and (\mbox{\hyperlink{}{HF\+::\+Raytracer\+::\+Embree\+Ray\+Tracer}} $\ast$) instances.

{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Load\+OBJ loaded mesh successfully into loaded\+\_\+obj at address 0000014ECADE5200, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Create\+Raytracer created Embree\+Ray\+Tracer successfully into bvh at address 0000014ECAD825\+A0, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (0, 2) 2.\+23607}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (2, 0) 2.\+23607}~\newline


Definition at line \mbox{\hyperlink{a00446_source_l00016}{16}} of file \mbox{\hyperlink{a00446_source}{visibility\+\_\+graph\+\_\+\+C.\+cpp}}.



References \mbox{\hyperlink{a00026_source_l00128}{HF\+::\+Visibility\+Graph\+::\+All\+To\+All()}}, \mbox{\hyperlink{a00245_source_l00024}{Convert\+Raw\+Float\+Array\+To\+Points()}}, and \mbox{\hyperlink{a00176_source_l00032}{HF\+::\+Exceptions\+::\+OK}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00460_ga0255e6c4811298e61110adc64c0f8acd_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}\label{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}} 
\index{VisibilityGraph@{VisibilityGraph}!CreateVisibilityGraphAllToAllUndirected@{CreateVisibilityGraphAllToAllUndirected}}
\index{CreateVisibilityGraphAllToAllUndirected@{CreateVisibilityGraphAllToAllUndirected}!VisibilityGraph@{VisibilityGraph}}
\doxysubsubsection{\texorpdfstring{CreateVisibilityGraphAllToAllUndirected()}{CreateVisibilityGraphAllToAllUndirected()}}
{\footnotesize\ttfamily \mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} Create\+Visibility\+Graph\+All\+To\+All\+Undirected (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$}]{ert,  }\item[{const float $\ast$}]{nodes,  }\item[{int}]{num\+\_\+nodes,  }\item[{\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$}]{out\+\_\+graph,  }\item[{float}]{height,  }\item[{const int}]{cores }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\mbox{\hyperlink{a00449}{Cinterface/visibility\+\_\+graph\+\_\+\+C.\+h}}$>$}



Create a new undirected visibility graph between all nodes in nodes. 


\begin{DoxyParams}{Parameters}
{\em ert} & The raytracer to cast rays from\\
\hline
{\em nodes} & Coordinates of nodes to use in generating the visibility graph. Every three floats (every three members in nodes) should represent a single node (point) \{x, y, z\}\\
\hline
{\em num\+\_\+nodes} & Amount of nodes (points) that will be used to generate the visibility graph. This should be equal to (size of nodes / 3), since every three floats represents a single point.\\
\hline
{\em out\+\_\+graph} & Address of (\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$); address of a pointer to a \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}}. (out\+\_\+graph) will point to memory allocated by \mbox{\hyperlink{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}{Create\+Visibility\+Graph\+All\+To\+All\+Undirected}}.\\
\hline
{\em height} & How far to offset nodes from the ground.\\
\hline
{\em cores} & CPU core count. A value of (-\/1) means to use all available cores on the system.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
HF\+\_\+\+STATUS\+::\+OK on completion
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}} (How to create a BVH), \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} (How to destroy a BVH)

\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}} (How to create a mesh), (How to destroy a mesh) 

\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}} (How to create a BVH), \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} (How to destroy a BVH)
\end{DoxySeeAlso}
Begin by {\bfseries{loading an .obj file}} (\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}}).~\newline
 Then, {\bfseries{create a BVH}} (\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}}) using the {\bfseries{mesh}}.~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// The model is a flat plane, so only nodes 0, 2 should connect.}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Every three floats should represent a single (x, y, z) point.}}
\DoxyCodeLine{        \textcolor{keyword}{const} std::array<float, 9> points \{ 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, -\/10.0f, 0.0f, 2.0f, 0.0f \};}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// This should be the array element count within points.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} points\_size = points.size();}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Represents how far to offset nodes from the ground.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{float} height = 1.7f;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Total amount of nodes to use in the visibility graph.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} points\_count = points\_size / 3;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// CPU core count. -\/1 means to use all avaiable cores on the client system.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} core\_count = -\/1;}

\end{DoxyCodeInclude}


Now we are ready to call \mbox{\hyperlink{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}{Create\+Visibility\+Graph\+All\+To\+All\+Undirected}} . 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Declare a pointer to Graph.}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Notice that we pass the address of VG to CreateVisibilityAllToAllUndirected.}}
\DoxyCodeLine{        \textcolor{comment}{// CreateVisibilityAllToAllUndirected will assign the deferenced address to a pointer that points}}
\DoxyCodeLine{        \textcolor{comment}{// to memory on the free store. We will call DestroyGraph to release the memory resources later on.}}
\DoxyCodeLine{        \mbox{\hyperlink{a01551}{HF::SpatialStructures::Graph}}* VG = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8}{CreateVisibilityGraphAllToAllUndirected}}(bvh, points.data(), points\_count, \&VG, height, core\_count);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at CreateVisibilityGraphAllToAllUndirected, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Very important\+: {\bfseries{after generating/adding edges to a graph -- it must be compressed.}} 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Always compress the graph after generating a graph/adding new edges}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_gab7ecc1be5c746ed3f99ab7494316c65d}{Compress}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at Compress, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// VG, the visibility graph, is now ready for use.}}
\DoxyCodeLine{        \textcolor{comment}{//}}

\end{DoxyCodeInclude}


You are now ready to use the visibility graph. Start by retrieving the {\bfseries{CSR representation}} of the graph\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Retrieve CSR representation of graph}}
\DoxyCodeLine{        \mbox{\hyperlink{a01539}{HF::SpatialStructures::CSRPtrs}} csr;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// The parameter default name refers to an alternate edge cost type.}}
\DoxyCodeLine{        \textcolor{comment}{// An empty string means we are using the default cost type}}
\DoxyCodeLine{        \textcolor{comment}{// (the costs that the graph was created with),}}
\DoxyCodeLine{        \textcolor{comment}{// but alternate edge costs could also be 'CrossSlope' or 'EnergyExpenditure', etc.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{char}* default\_name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga58e27a4c3b5a2d9692536877c2e13691}{GetCSRPointers}}(VG,}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}}, \&csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}}, \&csr.\mbox{\hyperlink{a01539_a5aed9a3184fd7d7aded80c97c33e2dc5}{cols}},}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}}, \&csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}}, \&csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}},}
\DoxyCodeLine{            default\_name);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at GetCSRPointers, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Set up the {\bfseries{pointers}} required to iterate over the CSR. Then {\bfseries{output the CSR to the console}}\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Setting up a CSR 'iterator'}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* curr = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}};                 \textcolor{comment}{// address of current position within edge data}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* data\_end = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}};    \textcolor{comment}{// address of one-\/past the last element within edge data}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordtype}{int}* inner = csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}};            \textcolor{comment}{// address of current position within child node id buffer (column value)}}
\DoxyCodeLine{        \textcolor{keywordtype}{int} row = 0;                            \textcolor{comment}{// value denoting the current parent node id (row number)}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{while} (curr < data\_end) \{}
\DoxyCodeLine{            \textcolor{comment}{// While edge data remains...}}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Note the current position within the edge data buffer.}}
\DoxyCodeLine{            \textcolor{comment}{// This is the address that denotes the beginning of a row.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_begin = curr;}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// If we are at the last row index,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is data\_end -\/-\/ else,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is the address of the next row's (row + 1) initial value.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_end =}
\DoxyCodeLine{                (row == csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}} -\/ 1)}
\DoxyCodeLine{                ? data\_end : csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}}[row + 1];}
\DoxyCodeLine{}
\DoxyCodeLine{            while (curr < row\_end) \{}
\DoxyCodeLine{                \textcolor{comment}{// While curr is not at the end of the current row...}}
\DoxyCodeLine{}
\DoxyCodeLine{                \textcolor{comment}{// row is the parent node id}}
\DoxyCodeLine{                \textcolor{comment}{// *inner is the child node id}}
\DoxyCodeLine{                \textcolor{comment}{// *curr is the edge value between parent node id and child node id}}
\DoxyCodeLine{                std::cout << \textcolor{stringliteral}{"{}("{}} << row << \textcolor{stringliteral}{"{}, "{}} << *inner << \textcolor{stringliteral}{"{})"{}}}
\DoxyCodeLine{                    << \textcolor{stringliteral}{"{}\(\backslash\)t\(\backslash\)t"{}} << *curr << std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{                ++inner;    \textcolor{comment}{// advance the address of inner (child node id buffer)}}
\DoxyCodeLine{                ++curr;     \textcolor{comment}{// advance the address of curr (edge data buffer)}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{}
\DoxyCodeLine{            ++row;  \textcolor{comment}{// advance the row value (parent node id)}}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


After use, the visibility graph resources must be {\bfseries{relinquished}}\+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// destroy VG (visibility graph)}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga645abacd11e1fa535f953344aaa77727}{DestroyGraph}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at DestroyGraph, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


From here, please review the example at \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} for instructions~\newline
 on how to free the remainder of the resources used by the visibility graph -- ~\newline
 which are the (vector\texorpdfstring{$<$}{<}\mbox{\hyperlink{a01351}{HF\+::\+Geometry\+::\+Mesh\+Info}}\texorpdfstring{$>$}{>} $\ast$) and (\mbox{\hyperlink{}{HF\+::\+Raytracer\+::\+Embree\+Ray\+Tracer}} $\ast$) instances.

{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Load\+OBJ loaded mesh successfully into loaded\+\_\+obj at address 0000014ECADE5140, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Create\+Raytracer created Embree\+Ray\+Tracer successfully into bvh at address 0000014ECAD82\+AA0, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (0, 2) 2.\+23607}~\newline


Definition at line \mbox{\hyperlink{a00446_source_l00040}{40}} of file \mbox{\hyperlink{a00446_source}{visibility\+\_\+graph\+\_\+\+C.\+cpp}}.



References \mbox{\hyperlink{a00026_source_l00252}{HF\+::\+Visibility\+Graph\+::\+All\+To\+All\+Undirected()}}, \mbox{\hyperlink{a00245_source_l00024}{Convert\+Raw\+Float\+Array\+To\+Points()}}, and \mbox{\hyperlink{a00176_source_l00032}{HF\+::\+Exceptions\+::\+OK}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00460_ga9b0664a60bcdf276b0fe0a2023b3d9b8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{a00460_gaf2e404cb696aee3473cac0d1507576d8}\label{a00460_gaf2e404cb696aee3473cac0d1507576d8}} 
\index{VisibilityGraph@{VisibilityGraph}!CreateVisibilityGraphGroupToGroup@{CreateVisibilityGraphGroupToGroup}}
\index{CreateVisibilityGraphGroupToGroup@{CreateVisibilityGraphGroupToGroup}!VisibilityGraph@{VisibilityGraph}}
\doxysubsubsection{\texorpdfstring{CreateVisibilityGraphGroupToGroup()}{CreateVisibilityGraphGroupToGroup()}}
{\footnotesize\ttfamily \mbox{\hyperlink{a00407_a91fa3b2bb3a7312ec39d74cc1fbc7bbe}{C\+\_\+\+INTERFACE}} Create\+Visibility\+Graph\+Group\+To\+Group (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{a01411}{HF\+::\+Ray\+Tracer\+::\+Embree\+Ray\+Tracer}} $\ast$}]{ert,  }\item[{const float $\ast$}]{group\+\_\+a,  }\item[{const int}]{size\+\_\+a,  }\item[{const float $\ast$}]{group\+\_\+b,  }\item[{const int}]{size\+\_\+b,  }\item[{\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$$\ast$}]{out\+\_\+graph,  }\item[{float}]{height }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\mbox{\hyperlink{a00449}{Cinterface/visibility\+\_\+graph\+\_\+\+C.\+h}}$>$}



Create a new visibility graph from the nodes in group\+\_\+a, into the nodes of group\+\_\+b. 


\begin{DoxyParams}{Parameters}
{\em ert} & The raytracer to cast rays from\\
\hline
{\em group\+\_\+a} & Coordinates of nodes to cast rays from. (source node coordinates) Every three floats (every three members in nodes) should represent a single node (point) \{x, y, z\}\\
\hline
{\em size\+\_\+a} & Amount of nodes (points) in group\+\_\+a. This should be equal to (size of group\+\_\+a / 3), since every three floats represents a single point.\\
\hline
{\em group\+\_\+b} & Coordinates of nodes to cast rays at. (destination node coordinates)\\
\hline
{\em size\+\_\+b} & Amount of nodes (points) in group\+\_\+b. This should be equal to (size of group\+\_\+b / 3), since every three floats represents a single point.\\
\hline
{\em out\+\_\+graph} & Address of (\mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}} $\ast$); address of a pointer to a \mbox{\hyperlink{a01551}{HF\+::\+Spatial\+Structures\+::\+Graph}}. (out\+\_\+graph) will point to memory allocated by \mbox{\hyperlink{a00460_gaf2e404cb696aee3473cac0d1507576d8}{Create\+Visibility\+Graph\+Group\+To\+Group}}.\\
\hline
{\em height} & How far to offset nodes from the ground.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
HF\+\_\+\+STATUS\+::\+OK on completion
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}} (How to create a mesh), (How to destroy a mesh) 

\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}} (How to create a BVH), \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} (How to destroy a BVH)
\end{DoxySeeAlso}
Begin by {\bfseries{loading an .obj file}} (\mbox{\hyperlink{a00455_mesh_setup}{Mesh setup}}).~\newline
 Then, {\bfseries{create a BVH}} (\mbox{\hyperlink{a00457_raytracer_setup}{Raytracer setup}}) using the {\bfseries{mesh}}.~\newline


Set up the parameters for the visibility graph. 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// The first coordinate array -\/ the source node coordinates.}}
\DoxyCodeLine{        \textcolor{keyword}{const} std::array<float, 9> coords\_a \{ 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, -\/10.0f, 0.0f, 2.0f, 0.0f \};}
\DoxyCodeLine{        }
\DoxyCodeLine{        \textcolor{comment}{// Element count of the first coordinate array, 'coords\_a'.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} size\_coords\_a = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(coords\_a.size());}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Total count of nodes in coords\_a. }}
\DoxyCodeLine{        \textcolor{comment}{// Every three coordinates \{ x, y, z \} represents a single node (point).}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} count\_nodes\_a = size\_coords\_a / 3;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// The second coordinates array -\/ the destination node coordinates.}}
\DoxyCodeLine{        \textcolor{keyword}{const} std::array<float, 9> coords\_b \{ 10.0f, 10.0f, 11.0f, 10.0f, 10.0f, 0.0f, 10.0f, 12.0f, 10.0f \};}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Element count of the second coordinate array, 'coords\_b'.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} size\_coords\_b = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(coords\_b.size());}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Total count of nodes in coords\_b.}}
\DoxyCodeLine{        \textcolor{comment}{// Every three coordinates \{ x, y, z \} represents a single node (point).}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{int} count\_nodes\_b = size\_coords\_b / 3;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// Distance of node offset from the ground.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{float} height = 1.7f;}

\end{DoxyCodeInclude}


Now we are ready to call \mbox{\hyperlink{a00460_gaf2e404cb696aee3473cac0d1507576d8}{Create\+Visibility\+Graph\+Group\+To\+Group}} . 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Declare a pointer to Graph.}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Notice that we pass the address of VG to CreateVisibilityGraphGroupToGroup.}}
\DoxyCodeLine{        \textcolor{comment}{// CreateVisibilityGraphGroupToGroup will assign the deferenced address to a pointer that points}}
\DoxyCodeLine{        \textcolor{comment}{// to memory on the free store. We will call DestroyGraph to release the memory resources later on.}}
\DoxyCodeLine{        \mbox{\hyperlink{a01551}{HF::SpatialStructures::Graph}}* VG = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00460_gaf2e404cb696aee3473cac0d1507576d8}{CreateVisibilityGraphGroupToGroup}}(bvh, coords\_a.data(), count\_nodes\_a, coords\_b.data(), count\_nodes\_b, \&VG, height);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at CreateVisibilityGraphGroupToGroup, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Very important\+: {\bfseries{after generating/adding edges to a graph -- it must be compressed.}} 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Always compress the graph after generating a graph/adding new edges}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_gab7ecc1be5c746ed3f99ab7494316c65d}{Compress}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at Compress, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


You are now ready to use the visibility graph. Start by retrieving the {\bfseries{CSR representation}} of the graph\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// Retrieve CSR representation of graph}}
\DoxyCodeLine{        \mbox{\hyperlink{a01539}{HF::SpatialStructures::CSRPtrs}} csr;}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{comment}{// The parameter default name refers to an alternate edge cost type.}}
\DoxyCodeLine{        \textcolor{comment}{// An empty string means we are using the default cost type}}
\DoxyCodeLine{        \textcolor{comment}{// (the costs that the graph was created with),}}
\DoxyCodeLine{        \textcolor{comment}{// but alternate edge costs could also be 'CrossSlope' or 'EnergyExpenditure', etc.}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keywordtype}{char}* default\_name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga58e27a4c3b5a2d9692536877c2e13691}{GetCSRPointers}}(VG,}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}}, \&csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}}, \&csr.\mbox{\hyperlink{a01539_a5aed9a3184fd7d7aded80c97c33e2dc5}{cols}},}
\DoxyCodeLine{            \&csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}}, \&csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}}, \&csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}},}
\DoxyCodeLine{            default\_name);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            \textcolor{comment}{// Error!}}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at GetCSRPointers, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


Set up the {\bfseries{pointers}} required to iterate over the CSR. Then {\bfseries{output the CSR to the console}}\+:~\newline
 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{comment}{// Setting up a CSR 'iterator'}}
\DoxyCodeLine{        \textcolor{comment}{//}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* curr = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}};                 \textcolor{comment}{// address of current position within edge data}}
\DoxyCodeLine{        \textcolor{keywordtype}{float}* data\_end = csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a67ae38cef6b322331f0e9100b3f480f8}{nnz}};    \textcolor{comment}{// address of one-\/past the last element within edge data}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordtype}{int}* inner = csr.\mbox{\hyperlink{a01539_a9a946e3ae6172a03c6a98e1dee39cc19}{inner\_indices}};            \textcolor{comment}{// address of current position within child node id buffer (column value)}}
\DoxyCodeLine{        \textcolor{keywordtype}{int} row = 0;                            \textcolor{comment}{// value denoting the current parent node id (row number)}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{while} (curr < data\_end) \{}
\DoxyCodeLine{            \textcolor{comment}{// While edge data remains...}}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// Note the current position within the edge data buffer.}}
\DoxyCodeLine{            \textcolor{comment}{// This is the address that denotes the beginning of a row.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_begin = curr;}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{comment}{// If we are at the last row index,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is data\_end -\/-\/ else,}}
\DoxyCodeLine{            \textcolor{comment}{// row\_end is the address of the next row's (row + 1) initial value.}}
\DoxyCodeLine{            \textcolor{keywordtype}{float}* row\_end =}
\DoxyCodeLine{                (row == csr.\mbox{\hyperlink{a01539_ab7ef161d6dfc8b606c120cbf5181ed68}{rows}} -\/ 1)}
\DoxyCodeLine{                ? data\_end : csr.\mbox{\hyperlink{a01539_ab31bc5e69630e9101a82790c3a525386}{data}} + csr.\mbox{\hyperlink{a01539_a49c0ac5c7fde9a797887699bc4670de4}{outer\_indices}}[row + 1];}
\DoxyCodeLine{}
\DoxyCodeLine{            while (curr < row\_end) \{}
\DoxyCodeLine{                \textcolor{comment}{// While curr is not at the end of the current row...}}
\DoxyCodeLine{}
\DoxyCodeLine{                \textcolor{comment}{// row is the parent node id}}
\DoxyCodeLine{                \textcolor{comment}{// *inner is the child node id}}
\DoxyCodeLine{                \textcolor{comment}{// *curr is the edge value between parent node id and child node id}}
\DoxyCodeLine{                std::cout << \textcolor{stringliteral}{"{}("{}} << row << \textcolor{stringliteral}{"{}, "{}} << *inner << \textcolor{stringliteral}{"{})"{}}}
\DoxyCodeLine{                    << \textcolor{stringliteral}{"{}\(\backslash\)t\(\backslash\)t"{}} << *curr << std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{                ++inner;    \textcolor{comment}{// advance the address of inner (child node id buffer)}}
\DoxyCodeLine{                ++curr;     \textcolor{comment}{// advance the address of curr (edge data buffer)}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{}
\DoxyCodeLine{            ++row;  \textcolor{comment}{// advance the row value (parent node id)}}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


After use, the visibility graph resources must be {\bfseries{relinquished}}\+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{        \textcolor{comment}{// destroy VG (visibility graph)}}
\DoxyCodeLine{        status = \mbox{\hyperlink{a00458_ga645abacd11e1fa535f953344aaa77727}{DestroyGraph}}(VG);}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (status != 1) \{}
\DoxyCodeLine{            std::cerr << \textcolor{stringliteral}{"{}Error at DestroyGraph, code: "{}} << status << std::endl;}
\DoxyCodeLine{        \}}

\end{DoxyCodeInclude}


From here, please review the example at \mbox{\hyperlink{a00457_raytracer_teardown}{Raytracer teardown}} for instructions~\newline
 on how to free the remainder of the resources used by the visibility graph -- ~\newline
 which are the (vector\texorpdfstring{$<$}{<}\mbox{\hyperlink{a01351}{HF\+::\+Geometry\+::\+Mesh\+Info}}\texorpdfstring{$>$}{>} $\ast$) and (\mbox{\hyperlink{}{HF\+::\+Raytracer\+::\+Embree\+Ray\+Tracer}} $\ast$) instances.

{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Load\+OBJ loaded mesh successfully into loaded\+\_\+obj at address 0000014ECADE4\+C60, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} Create\+Raytracer created Embree\+Ray\+Tracer successfully into bvh at address 0000014ECAD82320, code\+: 1}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (0, 3) 17.\+3205}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (0, 4) 14.\+1774}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (0, 5) 18.\+0278}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (2, 3) 16.\+8819}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (2, 4) 12.\+8062}~\newline
{\ttfamily \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} (2, 5) 17.\+3205}~\newline


Definition at line \mbox{\hyperlink{a00446_source_l00064}{64}} of file \mbox{\hyperlink{a00446_source}{visibility\+\_\+graph\+\_\+\+C.\+cpp}}.



References \mbox{\hyperlink{a00245_source_l00024}{Convert\+Raw\+Float\+Array\+To\+Points()}}, \mbox{\hyperlink{a00026_source_l00189}{HF\+::\+Visibility\+Graph\+::\+Group\+To\+Group()}}, \mbox{\hyperlink{a00176_source_l00041}{HF\+::\+Exceptions\+::\+NO\+\_\+\+GRAPH}}, and \mbox{\hyperlink{a00176_source_l00032}{HF\+::\+Exceptions\+::\+OK}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00460_gaf2e404cb696aee3473cac0d1507576d8_cgraph}
\end{center}
\end{figure}
